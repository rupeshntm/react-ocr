{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/rupeshchavan/Desktop/lendenclub-assign/react-ocr/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rupeshchavan/Desktop/lendenclub-assign/react-ocr/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rupeshchavan/Desktop/lendenclub-assign/react-ocr/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./App.css\";import Tesseract from\"tesseract.js\";import TextWrapper from\"./components/TextWrapper\";import ImageWrapper from\"./components/ImageWrapper\";import axios from\"axios\";var API_KEY=\"72cdbedbf6cb03092ae7621172225b68\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),imageUrl=_useState4[0],setImageUrl=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var convertImageToText=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return Tesseract.recognize(imageUrl,\"eng\");case 3:result=_context.sent;setText(result.data.text);setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function convertImageToText(){return _ref.apply(this,arguments);};}();var uploadFile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var formData,config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);formData=new FormData();formData.append(\"image\",e.target.files[0]);config={headers:{\"content-type\":\"multipart/form-data\"}};_context2.next=7;return axios.post(\"https://api.imgbb.com/1/upload?key=\".concat(API_KEY),formData,config);case 7:res=_context2.sent;setImageUrl(res.data.data.url);setLoading(false);_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0.message);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function uploadFile(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){if(imageUrl!=null){convertImageToText();}},[imageUrl]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\"}),text==null?/*#__PURE__*/_jsx(ImageWrapper,{loading:loading,uploadFile:uploadFile}):/*#__PURE__*/_jsx(TextWrapper,{text:text})]})});}export default App;","map":{"version":3,"sources":["/Users/rupeshchavan/Desktop/lendenclub-assign/react-ocr/src/App.js"],"names":["React","useState","useEffect","Tesseract","TextWrapper","ImageWrapper","axios","API_KEY","App","loading","setLoading","imageUrl","setImageUrl","text","setText","convertImageToText","recognize","result","data","uploadFile","e","formData","FormData","append","target","files","config","headers","post","res","url","console","log","message"],"mappings":"mfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,OAAO,CAAG,kCAAhB,CAEA,QAASC,CAAAA,GAAT,EAAe,eACiBP,QAAQ,CAAC,KAAD,CADzB,wCACNQ,OADM,eACGC,UADH,8BAEmBT,QAAQ,CAAC,IAAD,CAF3B,yCAENU,QAFM,eAEIC,WAFJ,8BAGWX,QAAQ,CAAC,IAAD,CAHnB,yCAGNY,IAHM,eAGAC,OAHA,eAKb,GAAMC,CAAAA,kBAAkB,0FAAG,8IACzBL,UAAU,CAAC,IAAD,CAAV,CADyB,sBAEJP,CAAAA,SAAS,CAACa,SAAV,CAAoBL,QAApB,CAA8B,KAA9B,CAFI,QAEnBM,MAFmB,eAGzBH,OAAO,CAACG,MAAM,CAACC,IAAP,CAAYL,IAAb,CAAP,CACAH,UAAU,CAAC,KAAD,CAAV,CAJyB,sDAAH,kBAAlBK,CAAAA,kBAAkB,0CAAxB,CAOA,GAAMI,CAAAA,UAAU,2FAAG,kBAAOC,CAAP,+JAEfV,UAAU,CAAC,IAAD,CAAV,CACMW,QAHS,CAGE,GAAIC,CAAAA,QAAJ,EAHF,CAIfD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBH,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAzB,EACMC,MALS,CAKA,CACbC,OAAO,CAAE,CACP,eAAgB,qBADT,CADI,CALA,wBAWGrB,CAAAA,KAAK,CAACsB,IAAN,8CACsBrB,OADtB,EAEhBc,QAFgB,CAGhBK,MAHgB,CAXH,QAWTG,GAXS,gBAgBfjB,WAAW,CAACiB,GAAG,CAACX,IAAJ,CAASA,IAAT,CAAcY,GAAf,CAAX,CACApB,UAAU,CAAC,KAAD,CAAV,CAjBe,qFAmBfqB,OAAO,CAACC,GAAR,CAAY,aAAMC,OAAlB,EAnBe,uEAAH,kBAAVd,CAAAA,UAAU,6CAAhB,CAuBAjB,SAAS,CAAC,UAAM,CACd,GAAIS,QAAQ,EAAI,IAAhB,CAAsB,CACpBI,kBAAkB,GACnB,CACF,CAJQ,CAIN,CAACJ,QAAD,CAJM,CAAT,CAMA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,WAAf,WACGF,OAAO,eAAI,YAAK,SAAS,CAAC,QAAf,EADd,CAEGI,IAAI,EAAI,IAAR,cACC,KAAC,YAAD,EAAc,OAAO,CAAEJ,OAAvB,CAAgC,UAAU,CAAEU,UAA5C,EADD,cAGC,KAAC,WAAD,EAAa,IAAI,CAAEN,IAAnB,EALJ,GADF,EADF,CAYD,CAED,cAAeL,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Tesseract from \"tesseract.js\";\nimport TextWrapper from \"./components/TextWrapper\";\nimport ImageWrapper from \"./components/ImageWrapper\";\nimport axios from \"axios\";\n\nconst API_KEY = \"72cdbedbf6cb03092ae7621172225b68\";\n\nfunction App() {\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState(null);\n  const [text, setText] = useState(null);\n\n  const convertImageToText = async () => {\n    setLoading(true);\n    const result = await Tesseract.recognize(imageUrl, \"eng\");\n    setText(result.data.text);\n    setLoading(false);\n  };\n\n  const uploadFile = async (e) => {\n    try {\n      setLoading(true);\n      const formData = new FormData();\n      formData.append(\"image\", e.target.files[0]);\n      const config = {\n        headers: {\n          \"content-type\": \"multipart/form-data\",\n        },\n      };\n\n      const res = await axios.post(\n        `https://api.imgbb.com/1/upload?key=${API_KEY}`,\n        formData,\n        config\n      );\n      setImageUrl(res.data.data.url);\n      setLoading(false);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  useEffect(() => {\n    if (imageUrl != null) {\n      convertImageToText();\n    }\n  }, [imageUrl]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"container\">\n        {loading && <div className=\"loader\"></div>}\n        {text == null ? (\n          <ImageWrapper loading={loading} uploadFile={uploadFile} />\n        ) : (\n          <TextWrapper text={text} />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}